# $Id$

include Makefile.header

SUBDIRS = src

all::	all-recursive

clean:	clean-recursive

depend:	depend-recursive

all-recursive:
	@list='$(SUBDIRS)'; \
	for subdir in $$list; do \
		(cd $$subdir && $(MAKE) all); \
	done

clean-recursive:
	@list='$(SUBDIRS)'; \
	for subdir in $$list; do \
		(cd $$subdir && $(MAKE) clean); \
	done

depend-recursive:
	@list='$(SUBDIRS)'; \
	for subdir in $$list; do \
		(cd $$subdir && $(MAKE) depend); \
	done

# not working yet
dist:	all
	DISTDIR=LaunchPad-src-$(VERSION_STRING); \
	rm -rf $$DISTDIR; \
	mkdir $$DISTDIR; \
	(mkdir $$DISTDIR/src; cd src; DISTDIR=$$DISTDIR/src $(MAKE) dist); \
	zip -r $$DISTDIR.zip $$DISTDIR/; \
	rm -rf $$DISTDIR

dist-bin:	all
	DISTDIR=LaunchPad-$(VERSION_STRING)-$(CPU); \
	rm -rf $$DISTDIR; \
	mkdir $$DISTDIR; \
	for i in LICENSE README AUTHORS src/LaunchPad; do \
		to=`basename $$i`;\
		cp $$i $$DISTDIR; mimeset -f $$DISTDIR/$$to; \
	done; \
	zip -r $$DISTDIR.zip $$DISTDIR/; \
	rm -rf $$DISTDIR

Makefile Makefile.header src/Makefile:	Makefile.in Makefile.header.in src/Makefile.in
	config.status

configure:	configure.in
	autoconf
