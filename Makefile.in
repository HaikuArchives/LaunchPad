# $Id$

include Makefile.header

SUBDIRS = src

all::	all-recursive

clean:	clean-recursive

depend:	depend-recursive

all-recursive:
	@list='$(SUBDIRS)'; \
	for subdir in $$list; do \
		(cd $$subdir && make); \
	done

clean-recursive:
	@list='$(SUBDIRS)'; \
	for subdir in $$list; do \
		(cd $$subdir && make clean); \
	done

depend-recursive:
	@list='$(SUBDIRS)'; \
	for subdir in $$list; do \
		(cd $$subdir && make depend); \
	done

# not working yet
dist:	all
	DISTDIR=LaunchPad-src-$(VERSION_STRING); \
	rm -rf $$DISTDIR; \
	mkdir $$DISTDIR; \
	(mkdir $$DISTDIR/src; cd src; DISTDIR=$$DISTDIR/src make dist); \
	zip -r $$DISTDIR.zip $$DISTDIR/; \
	rm -rf $$DISTDIR

bin-dist:	all
	DISTDIR=LaunchPad-$(VERSION_STRING); \
	rm -rf $$DISTDIR; \
	mkdir $$DISTDIR; \
	for i in README AUTHORS src/LaunchPad; do \
		cp $$i $$DISTDIR; mimeset -f $$DISTDIR/$$i; \
	done; \
	zip -r $$DISTDIR.zip $$DISTDIR/; \
	rm -rf $$DISTDIR

Makefile Makefile.header src/Makefile:	Makefile.in Makefile.header.in src/Makefile.in
	config.status

configure:	configure.in
	autoconf
